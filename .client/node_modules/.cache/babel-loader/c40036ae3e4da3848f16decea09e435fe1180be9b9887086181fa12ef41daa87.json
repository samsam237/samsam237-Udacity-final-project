{"ast":null,"code":"import _regeneratorRuntime from \"/home/sam_sam/Bureau/code/Udacity/fullstack track/cloud-developer/course-04/project/c4-final-project-starter-code/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/sam_sam/Bureau/code/Udacity/fullstack track/cloud-developer/course-04/project/c4-final-project-starter-code/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { apiEndpoint } from '../config';\nimport Axios from 'axios';\nexport function getTodos(_x) {\n  return _getTodos.apply(this, arguments);\n}\nfunction _getTodos() {\n  _getTodos = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(idToken) {\n    var response;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          console.log('Fetching todos');\n          _context.next = 3;\n          return Axios.get(\"\".concat(apiEndpoint, \"/todos\"), {\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': \"Bearer \".concat(idToken)\n            }\n          });\n        case 3:\n          response = _context.sent;\n          console.log('Todos:', response.data);\n          return _context.abrupt(\"return\", response.data.items);\n        case 6:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return _getTodos.apply(this, arguments);\n}\nexport function createTodo(_x2, _x3) {\n  return _createTodo.apply(this, arguments);\n}\nfunction _createTodo() {\n  _createTodo = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(idToken, newTodo) {\n    var response;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return Axios.post(\"\".concat(apiEndpoint, \"/todos\"), JSON.stringify(newTodo), {\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': \"Bearer \".concat(idToken)\n            }\n          });\n        case 2:\n          response = _context2.sent;\n          return _context2.abrupt(\"return\", response.data.item);\n        case 4:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return _createTodo.apply(this, arguments);\n}\nexport function patchTodo(_x4, _x5, _x6) {\n  return _patchTodo.apply(this, arguments);\n}\nfunction _patchTodo() {\n  _patchTodo = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(idToken, todoId, updatedTodo) {\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return Axios.patch(\"\".concat(apiEndpoint, \"/todos/\").concat(todoId), JSON.stringify(updatedTodo), {\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': \"Bearer \".concat(idToken)\n            }\n          });\n        case 2:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return _patchTodo.apply(this, arguments);\n}\nexport function deleteTodo(_x7, _x8) {\n  return _deleteTodo.apply(this, arguments);\n}\nfunction _deleteTodo() {\n  _deleteTodo = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(idToken, todoId) {\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return Axios.delete(\"\".concat(apiEndpoint, \"/todos/\").concat(todoId), {\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': \"Bearer \".concat(idToken)\n            }\n          });\n        case 2:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return _deleteTodo.apply(this, arguments);\n}\nexport function getUploadUrl(_x9, _x10) {\n  return _getUploadUrl.apply(this, arguments);\n}\nfunction _getUploadUrl() {\n  _getUploadUrl = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(idToken, todoId) {\n    var response;\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.next = 2;\n          return Axios.post(\"\".concat(apiEndpoint, \"/todos/\").concat(todoId, \"/attachment\"), '', {\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': \"Bearer \".concat(idToken)\n            }\n          });\n        case 2:\n          response = _context5.sent;\n          return _context5.abrupt(\"return\", response.data.uploadUrl);\n        case 4:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5);\n  }));\n  return _getUploadUrl.apply(this, arguments);\n}\nexport function uploadFile(_x11, _x12) {\n  return _uploadFile.apply(this, arguments);\n}\nfunction _uploadFile() {\n  _uploadFile = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(uploadUrl, file) {\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.next = 2;\n          return Axios.put(uploadUrl, file);\n        case 2:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6);\n  }));\n  return _uploadFile.apply(this, arguments);\n}","map":{"version":3,"names":["apiEndpoint","Axios","getTodos","_x","_getTodos","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","idToken","response","wrap","_callee$","_context","prev","next","console","log","get","concat","headers","sent","data","abrupt","items","stop","createTodo","_x2","_x3","_createTodo","_callee2","newTodo","_callee2$","_context2","post","JSON","stringify","item","patchTodo","_x4","_x5","_x6","_patchTodo","_callee3","todoId","updatedTodo","_callee3$","_context3","patch","deleteTodo","_x7","_x8","_deleteTodo","_callee4","_callee4$","_context4","delete","getUploadUrl","_x9","_x10","_getUploadUrl","_callee5","_callee5$","_context5","uploadUrl","uploadFile","_x11","_x12","_uploadFile","_callee6","file","_callee6$","_context6","put"],"sources":["/home/sam_sam/Bureau/code/Udacity/fullstack track/cloud-developer/course-04/project/c4-final-project-starter-code/client/src/api/todos-api.ts"],"sourcesContent":["import { apiEndpoint } from '../config'\nimport { Todo } from '../types/Todo';\nimport { CreateTodoRequest } from '../types/CreateTodoRequest';\nimport Axios from 'axios'\nimport { UpdateTodoRequest } from '../types/UpdateTodoRequest';\n\nexport async function getTodos(idToken: string): Promise<Todo[]> {\n  console.log('Fetching todos')\n\n  const response = await Axios.get(`${apiEndpoint}/todos`, {\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${idToken}`\n    },\n  })\n  console.log('Todos:', response.data)\n  return response.data.items\n}\n\nexport async function createTodo(\n  idToken: string,\n  newTodo: CreateTodoRequest\n): Promise<Todo> {\n  const response = await Axios.post(`${apiEndpoint}/todos`,  JSON.stringify(newTodo), {\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${idToken}`\n    }\n  })\n  return response.data.item\n}\n\nexport async function patchTodo(\n  idToken: string,\n  todoId: string,\n  updatedTodo: UpdateTodoRequest\n): Promise<void> {\n  await Axios.patch(`${apiEndpoint}/todos/${todoId}`, JSON.stringify(updatedTodo), {\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${idToken}`\n    }\n  })\n}\n\nexport async function deleteTodo(\n  idToken: string,\n  todoId: string\n): Promise<void> {\n  await Axios.delete(`${apiEndpoint}/todos/${todoId}`, {\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${idToken}`\n    }\n  })\n}\n\nexport async function getUploadUrl(\n  idToken: string,\n  todoId: string\n): Promise<string> {\n  const response = await Axios.post(`${apiEndpoint}/todos/${todoId}/attachment`, '', {\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${idToken}`\n    }\n  })\n  return response.data.uploadUrl\n}\n\nexport async function uploadFile(uploadUrl: string, file: Buffer): Promise<void> {\n  await Axios.put(uploadUrl, file)\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}